import{o as e,c as t,a as n,b as r,d as a,t as o,r as s,e as i,f as l,n as c,u as d,g as u,h as p,i as m,w as g,j as f,k as h}from"./vendor.d5e787fa.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var y=(e,t)=>{for(const[n,r]of t)e[n]=r;return e};const v={},b=[n("img",{class:"animate-bounce mx-auto select-none",alt:"logo",src:"/fruition-with-comments/assets/logo.82833b22.png"},null,-1),n("h1",{class:"font-black pt-6 text-4xl tracking-wider"}," fruition-with-giscus ",-1),n("h3",{class:"pt-2"},[r(" Add a comments system using "),n("b",null,"Giscus"),r(" to a site built with "),n("b",null,"Fruition")],-1)];var E=y(v,[["render",function(n,r){return e(),t("header",null,b)}]]);const x={class:"material-icons-outlined text-xl"},w=a({props:{isError:{type:Boolean,required:!1}},setup(r){const a=r,{isError:u}=o(s(a)),p=i(!1),m=i(!1),g=(()=>{let e;return()=>{(null==u?void 0:u.value)||(p.value=!0,m.value=!0,e&&clearInterval(e),e=setTimeout((()=>{m.value=!1,e=null}),1e3))}})();return(r,a)=>(e(),t("div",{class:c(["bg-white border-1 border-gray-300 border-solid cursor-pointer duration-150 flex h-9 items-center justify-center rounded-md text-gray-400 w-9 hover:bg-gray-100 hover:text-gray-500",{"hover:bg-gray-200":p.value,"hover:cursor-not-allowed":d(u)}]),onMousedown:a[0]||(a[0]=(...e)=>d(g)&&d(g)(...e)),onMouseup:a[1]||(a[1]=e=>p.value=!1)},[n("span",x,l(m.value?"done":"content_copy"),1)],34))}}),T=s({repo:"","repo-id":"",category:"","category-id":"","reactions-enabled":"","emit-metadata":"",theme:""}),R={class:"duration-150 relative transform hover:-translate-y-2px"},k=["placeholder","value","isReadonly","readonly"],C=a({props:{placeholder:{type:String,required:!1},isReadonly:{type:Boolean,required:!1},modelValue:{type:String,required:!1},isError:{type:Boolean,required:!1},userDatas:{type:null,required:!1}},emits:["update:modelValue"],setup(r,{emit:a}){const i=r,{isReadonly:l,isError:g,userDatas:f}=o(s(i)),h=u((()=>{if(!(null==f?void 0:f.value)||(null==g?void 0:g.value))return"Generated Cloudflare Worker Script";return(e=>[`<script type="module">\nconst commentsConfigs = {\n  target: 'giscus',\n  repo: '${e.repo}',\n  mapping: 'url',\n\n  repoId: '${e["repo-id"]}',\n  category: '${e.category}',\n  categoryId: '${e["category-id"]}',\n  term: '',\n  reactions: ${"1"===e["reactions-enabled"]?"true":"false"},\n  metadata: ${"1"===e["emit-metadata"]?"true":"false"},\n  theme: '${e.theme}',\n};\n\nconst genScriptElement = () => {\n  const el = document.createElement('script');\n\n  const {\n    repoId,\n    category,\n    categoryId,\n    term,\n    reactions,\n    metadata,\n    theme,\n  } = commentsConfigs;\n\n  const configs = {\n    src: 'https://giscus.app/client.js',\n    crossorigin: 'anonymous',\n    async: true,\n    'data-repo': commentsConfigs.repo,\n    'data-repo-id': repoId,\n    'data-category': category,\n    'data-category-id': categoryId,\n    'data-term': term,\n    'data-mapping': commentsConfigs.mapping,\n    'data-reactions-enabled': (reactions ? 1 : 0),\n    'data-emit-metadata': (metadata ? 1 : 0),\n    'data-theme': theme,\n  };\n\n  for (const [key, value] of Object.entries(configs)) {\n    el.setAttribute(key, value);\n  }\n\n  return el;\n};\n\nnew MutationObserver(([mutation], observer) => {\n  if (mutation.addedNodes.length === 0) {\n    return;\n  }\n\n  const appendTargetLastChild = document.querySelector('div.notion-presence-container');\n\n  if (!appendTargetLastChild) {\n    return;\n  }\n\n  const appendTarget = appendTargetLastChild.parentElement;\n\n  if (appendTarget.dataset.comments) {\n    return;\n  }\n\n  appendTarget.dataset.comments = true;\n  appendTarget.insertBefore(genScriptElement(), appendTargetLastChild);\n}).observe(document.querySelector('div#notion-app'), {\n  subtree: true,\n  childList: true,\n});\n  <\/script>`,"<style>\n  .notion-page-content {\n    padding-bottom: 5vh !important;\n  }\n  .giscus {\n    width: 900px;\n    max-width: 100%;\n    padding-left: calc(96px + env(safe-area-inset-left));\n    padding-right: calc(96px + env(safe-area-inset-right));\n    padding-bottom: 5vh;\n  }\n  </style>"].join("\n"))(f.value)})),y=()=>{(null==g?void 0:g.value)||console.log(h.value)},v=({currentTarget:e})=>a("update:modelValue",e.value),b=({currentTarget:e})=>{(null==l?void 0:l.value)||e.select()};return(a,o)=>(e(),t("div",R,[n("textarea",{class:c(["border border-gray-200 duration-150 h-240px max-w-screen-lg outline-none p-4 resize-none rounded-md shadow-md text-xs w-full hover:shadow-lg",{"cursor-default":d(l),"cursor-not-allowed":d(g),"text-gray-500":d(l)}]),placeholder:r.placeholder,value:d(l)?d(h):r.modelValue,isReadonly:d(l),readonly:d(l),onInput:v,onClick:b},null,42,k),d(l)?(e(),p(w,{key:0,class:"absolute right-4 top-4",onClick:y,isError:d(g)},null,8,["isError"])):m("",!0)]))}}),j={class:"antialiased break-words flex flex-col gap-12 justify-center pt-20 px-4 pb-12 select-none text-center"},I={class:"flex flex-col gap-8 px-12"},D=n("section",{class:"flex font-bold gap-2 justify-center text-blue-500"},[n("a",{class:"hover:underline",href:"https://github.com/Gumball12/fruition-with-giscus",target:"_blank"},"GitHub"),n("a",{class:"hover:underline",href:"https://fruition-with-giscus.shj.rip",target:"_blank"},"Notion")],-1);h(a({setup(r){const a=i(""),o=i(!1);return g(a,(e=>{const t=document.createElement("template");t.innerHTML=e;const n=t.content.firstElementChild;(({userDatas:e,scriptElem:t})=>!!t&&![["src","https://giscus.app/client.js",!1],...Object.keys(e).map((e=>[`data-${e}`,"",!0])),["data-mapping","url",!1],["crossorigin","anonymous",!1]].some((([e,n,r])=>!t.hasAttribute(e)||t.getAttribute(e)===n===r)))({userDatas:T,scriptElem:n})?((({scriptElem:e,userDatas:t})=>{Object.keys(t).forEach((n=>{var r;return t[n]=null!=(r=e.getAttribute(`data-${n}`))?r:""}))})({scriptElem:n,userDatas:T}),o.value=!0):o.value=!1})),(r,s)=>(e(),t("main",j,[f(E),n("section",I,[f(C,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=e=>a.value=e),placeholder:'<script\n    src="https://giscus.app/client.js"\n    data-repo="[ENTER REPO HERE]"\n    data-repo-id="[ENTER REPO ID HERE]"\n    data-category="[ENTER CATEGORY NAME HERE]"\n    data-category-id="[ENTER CATEGORY ID HERE]"\n    data-mapping="url"\n    data-reactions-enabled="1"\n    data-emit-metadata="0"\n    data-theme="light"\n    crossorigin="anonymous"\n    async>\n<\/script>'},null,8,["modelValue"]),f(C,{userDatas:d(T),isReadonly:!0,isError:!o.value},null,8,["userDatas","isError"])]),D]))}})).mount("#app");
